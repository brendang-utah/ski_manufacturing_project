<!DOCTYPE html>
<html>
<head>
    <title>Order List</title>
    <style>
        .order-item { border: 1px solid #ddd; margin: 10px 0; padding: 10px; }
        #auth-status { position: absolute; top: 10px; right: 10px; }
    </style>
</head>

<body>
    <div id="auth-status">
        {% if user.is_authenticated %}
            Welcome, {{ user.username }}!
            <a href="{% url 'logout' %}">Logout</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
        {% endif %}
    </div>

    <h1>Order List</h1>

    {% for order_data in orders_with_details %}
        <div class="order-item">
            <h2>Order #{{ order_data.order.id }}</h2>
            <p>Status: {{ order_data.order.status }}</p>
            <p>Customer: {{ order_data.order.customer.user.username }}</p>
            <p>Date: {{ order_data.order.date }}</p>
            
            <h3>Products:</h3>
            <ul>
                {% for line in order_data.lines %}
                    <li>
                        {{ line.product.name }} - 
                        Quantity: {{ line.quantity }}, 
                        Price: ${{ line.unit_price }}
                    </li>
                {% endfor %}
            </ul>

            <a href="{% url 'order-edit' order_data.order.id %}" class="edit-button">Edit Order</a>
        </div>
    {% empty %}
        <p>No orders found.</p>
    {% endfor %}
</body>
</html>
